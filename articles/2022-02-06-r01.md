---
title: "Jetson nanoにリモデ接続&k8sクラスタ向けセットアップ"
emoji: "📚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: true
---

Jetson nanoをリモートデスクトップで接続&日本語入力を設定し、最終的にkubernetesクラスタにNodeとしてjoin。コンテナ内からGPUを用いた処理を実行するところまで確認します。

以下の順に設定します。クラスタ参加はいらない...という場合は音声転送用設定まで実施すれば、RDPサーバとしてはおおよそ完成します。  
- Jetson nanoをセットアップ
    - 日本語化・日本語入力設定/Macキーボード向け設定
    - 音声転送設定
    - クラスタ参加用パラメータ追加
    - 

以前書いた記事を更新する内容となっていますので、下記は参照しなくて大丈夫です。
https://zenn.dev/nkte8/articles/2021-12-06-r01

# 機材について  
`JETSON NANO 2GB DEVELOPER KIT`になります。
必要なものは以下です
- MicroSD （64GB）
- USB-TypeC （給電用）
- LANケーブル

使っている周辺機器は以下です。
- Macbook 2019（RDPクライアント）
- MX ergo（トラックボール）
- MagicKeyboard（Macbook）
- Happy Hacking Keyboard（キーボード）

# Jetcardについて  
Jetcardはjetson nanoのセットアップをできるだけ簡略化するべく開発されているプロジェクトです。  
https://github.com/NVIDIA-AI-IOT/jetcard

# セットアップ方法
## Etherでイメージ書き込み
SDカードにJetcardのイメージを書き込みます。  
Jetcardのイメージは容量が大きいので、書き込みが終わるまで待ちましょう。  
今回は`jetcard_nano-4gb-jp451.zip`を使用しました。（Jetson nanoの2GB番もB01扱いになります。）

## SDカードとLANケーブルを接続し起動  
SDカードをボードに挿入し、LANケーブルを接続した状態で起動（TypeC電源を接続）します。  
`avahi-daemon`がプリインストールされているので、しばらくすると以下でSSH接続できるようになります。  
```sh
ssh jetson@nano-4gb-jp451.local
```
パスワードは`jetson`になります。  

## 言語パックのインストール  
CLI上では気になりませんが、RDP接続すると不便になってくるので、日本語化を行います。
```
sudo apt install -y language-pack-ja language-pack-gnome-ja-base language-pack-gnome-ja
```


```sh
sudo sed -i 's/#.*\(ja_JP.UTF-8 UTF-8\)/\1/g' /etc/locale.gen
sudo locale-gen
sudo update-locale LANG=ja_JP.UTF-8
timedatectl set-timezone Asia/Tokyo
```


```sh:~/.xsessionrc
setxkbmap -layout jp
xmodmap -e 'keycode 49 = Zenkaku_Hankaku' 2>/dev/null
xmodmap -e 'keycode 120 = Hiragana' 2>/dev/null
ibus-daemon -d -x
lxsession -s LXDE -e LXDE
```


https://qiita.com/jail/items/2dfcef721550f4f6fe34
https://endy-tech.hatenablog.jp/entry/linux_japanese_input
https://qiita.com/tailak/items/77b90a4df07e4f6a1fc2